---

## 技术决策清单

### 一、API 设计（后端对外契约）

| #   | 议题         | 要讨论的内容                                 |
| --- | ------------ | -------------------------------------------- |
| 1   | API 风格     | RESTful 还是 RPC 风格？URL 命名规范？        |
| 2   | 统一响应格式 | `{ code, message, data }` 还是直接返回数据？ |
| 3   | 错误码设计   | HTTP 状态码 vs 业务错误码，错误信息结构      |
| 4   | 分页方案     | offset/limit 还是 cursor？返回格式？         |
| 5   | API 版本管理 | `/api/v1/` 路径？还是 Header？还是不要？     |
| 6   | 时间格式     | ISO 8601？时区处理？                         |

---

### 二、认证与安全

| #   | 议题      | 要讨论的内容                                     |
| --- | --------- | ------------------------------------------------ |
| 7   | 认证方案  | JWT 结构、过期时间、刷新机制                     |
| 8   | 权限模型  | 家长/孩子角色区分？RBAC？还是简单的 owner 校验？ |
| 9   | 数据隔离  | 多用户数据怎么隔离？按 user_id？按 family_id？   |
| 10  | 敏感数据  | 密码加密算法（Argon2/bcrypt）、敏感字段脱敏      |
| 11  | CORS 策略 | 允许哪些域名？开发/生产环境差异                  |

---

### 三、后端架构

| #   | 议题         | 要讨论的内容                            |
| --- | ------------ | --------------------------------------- |
| 12  | 分层边界     | handler / service / repository 各层职责 |
| 13  | 错误处理     | 统一错误类型、错误传播、对外错误转换    |
| 14  | 数据校验     | 在哪一层校验？用什么库（validator）？   |
| 15  | 日志规范     | 日志级别、格式、哪些操作需要记录        |
| 16  | 数据库连接池 | 连接数配置、超时设置                    |
| 17  | 事务管理     | 哪些操作需要事务？事务边界在哪层？      |

---

### 四、前端技术栈

| #   | 议题         | 要讨论的内容                               |
| --- | ------------ | ------------------------------------------ |
| 18  | UI 组件库    | Element Plus / Naive UI / Vant（移动端）？ |
| 19  | 移动端适配   | 响应式？还是单独移动端样式？               |
| 20  | 状态管理     | Pinia 怎么组织？哪些数据放 store？         |
| 21  | 路由设计     | 页面结构、路由守卫、登录拦截               |
| 22  | API 调用封装 | axios 封装、请求/响应拦截、错误处理        |
| 23  | 组件设计     | 目录结构、命名规范、复用策略               |

---

### 五、文件与存储

| #   | 议题         | 要讨论的内容                 |
| --- | ------------ | ---------------------------- |
| 24  | 文件上传流程 | 前端直传 OSS？还是后端中转？ |
| 25  | 文件命名     | UUID？hash？保留原名？       |
| 26  | 文件大小限制 | 单文件上限？总空间配额？     |
| 27  | 图片处理     | 缩略图？压缩？OSS 图片处理？ |

---

### 六、开发工作流

| #   | 议题         | 要讨论的内容                                   |
| --- | ------------ | ---------------------------------------------- |
| 28  | Git 分支策略 | main/develop？feature 分支？                   |
| 29  | Commit 规范  | Conventional Commits？中文还是英文？           |
| 30  | 代码格式化   | Rust (rustfmt) / 前端 (ESLint + Prettier) 配置 |
| 31  | 测试策略     | 单元测试范围？集成测试？E2E？                  |
| 32  | Code Review  | 需要吗？自己项目怎么保证质量？                 |

---

### 七、部署与运维

| #   | 议题       | 要讨论的内容                          |
| --- | ---------- | ------------------------------------- |
| 33  | CI/CD      | GitHub Actions？手动部署？            |
| 34  | 域名与 SSL | 域名规划、证书申请（Let's Encrypt？） |
| 35  | 部署架构   | 单机 Docker？云服务器配置？           |
| 36  | 数据备份   | PostgreSQL 备份策略、频率             |
| 37  | 监控告警   | 需要吗？MVP 阶段怎么做？              |
| 38  | 日志收集   | 直接看容器日志？还是 ELK？            |

---

### 八、业务规则

| #   | 议题        | 要讨论的内容                   |
| --- | ----------- | ------------------------------ |
| 39  | 软删除策略  | 哪些数据软删除？保留多久？     |
| 40  | 数据归属    | 任务的 owner 是家长还是孩子？  |
| 41  | AI 调用策略 | 失败重试？降级方案？成本控制？ |
| 42  | 离线支持    | 需要考虑吗？PWA？              |

---

## 建议讨论顺序

按依赖关系和重要性排序：

```
第一批（地基，影响后续所有开发）：
├── #1-6   API 设计规范
├── #7-11  认证与安全
├── #12-17 后端架构
└── #28-30 开发工作流（早定早受益）

第二批（开始写页面前确定）：
├── #18-23 前端技术栈
└── #24-27 文件上传

第三批（部署前确定）：
├── #33-38 部署与运维
└── #39-42 业务规则

可以边做边定：
└── #31-32 测试策略（MVP 可以先简化）
```

---
